<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>íšŒì›ê°€ì… & ì„±í–¥ ë¶„ì„</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap"
    rel="stylesheet"
  />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: "Noto Sans KR", sans-serif;
      background: linear-gradient(135deg, #fdf8f4 0%, #f0f8ff 100%);
      min-height: 100vh;
      overflow-x: hidden;
    }
    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(253, 248, 244, 0.95);
      backdrop-filter: blur(10px);
      padding: 12px 20px;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
    }
    .step-indicator {
      font-size: 18px;
      font-weight: 700;
      color: #333;
    }
    .header-title {
      font-size: 16px;
      font-weight: 500;
      color: #666;
    }
    .header-icons {
      display: flex;
      gap: 12px;
    }
    .header-icon {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
      transition: background-color 0.2s;
    }
    .header-icon:hover {
      background-color: rgba(240, 240, 240, 0.8);
    }
    /* Main Container */
    .main-container {
      margin-top: 80px;
      padding: 20px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    /* Progress Bar */
    .progress-bar {
      width: 100%;
      height: 6px;
      background-color: #e0e0e0;
      border-radius: 3px;
      margin-bottom: 24px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #a3e4d7, #c0b3ea);
      border-radius: 3px;
      transition: width 0.5s ease;
      width: 0%;
    }
    /* User Info Form */
    .user-info-card {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      margin-bottom: 24px;
    }
    .form-title {
      font-size: 24px;
      font-weight: 700;
      color: #333;
      margin-bottom: 8px;
      text-align: center;
    }
    .form-subtitle {
      font-size: 14px;
      color: #666;
      text-align: center;
      margin-bottom: 32px;
    }
    .form-group {
      margin-bottom: 20px;
    }
    .form-label {
      display: block;
      font-weight: 500;
      color: #333;
      margin-bottom: 8px;
      font-size: 14px;
    }
    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.2s;
      background: rgba(255, 255, 255, 0.8);
    }
    .form-input:focus {
      outline: none;
      border-color: #a3e4d7;
    }
    .form-row {
      display: flex;
      gap: 16px;
    }
    .form-row .form-group {
      flex: 1;
    }
    /* Question Card */
    .question-card {
      display: none;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      margin-bottom: 24px;
    }
    .question-card.active {
      display: block;
    }
    .question-number {
      font-size: 14px;
      color: #a3e4d7;
      font-weight: 500;
      margin-bottom: 8px;
    }
    .question-text {
      font-size: 18px;
      font-weight: 700;
      color: #333;
      margin-bottom: 8px;
      line-height: 1.4;
    }
    .options-container {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 32px;
    }
    .option-item {
      display: flex;
      align-items: center;
      padding: 20px;
      background: rgba(245, 245, 245, 0.8);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }
    .option-item::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.4),
        transparent
      );
      transition: left 0.5s ease;
    }
    .option-item:hover::before {
      left: 100%;
    }
    .option-item:hover {
      background: rgba(232, 248, 245, 0.9);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(163, 228, 215, 0.3);
    }
    .option-item.selected {
      background: linear-gradient(135deg, #d0f0e9, #e8e2f7);
      border-color: #a3e4d7;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(163, 228, 215, 0.4);
    }
    .option-radio {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 2px solid #ccc;
      margin-right: 16px;
      position: relative;
      flex-shrink: 0;
      transition: all 0.3s ease;
    }
    .option-item.selected .option-radio {
      border-color: #a3e4d7;
      background-color: #a3e4d7;
    }
    .option-item.selected .option-radio::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 10px;
      height: 10px;
      background-color: white;
      border-radius: 50%;
    }
    .option-text {
      font-size: 15px;
      color: #333;
      flex: 1;
      line-height: 1.4;
    }
    .option-emoji {
      font-size: 24px;
      margin-left: 16px;
    }
    /* Navigation Buttons */
    .navigation {
      display: flex;
      justify-content: space-between;
      gap: 16px;
    }
    .nav-button {
      padding: 14px 28px;
      border: 2px solid #e0e0e0;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 120px;
      position: relative;
      overflow: hidden;
    }
    .nav-button::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: radial-gradient(
        circle,
        rgba(163, 228, 215, 0.3) 0%,
        transparent 70%
      );
      transition: all 0.3s ease;
      transform: translate(-50%, -50%);
    }
    .nav-button:hover::before {
      width: 300px;
      height: 300px;
    }
    .nav-button:hover:not(:disabled) {
      border-color: #a3e4d7;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(163, 228, 215, 0.3);
    }
    .nav-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    .nav-button.next:not(:disabled) {
      background: linear-gradient(135deg, #a3e4d7, #c0b3ea);
      border-color: #a3e4d7;
      color: #333;
    }
    /* Results Screen */
    .results-container {
      display: none;
      text-align: center;
    }
    .results-container.active {
      display: block;
    }
    .completion-message {
      font-size: 28px;
      font-weight: 700;
      color: #333;
      margin-bottom: 16px;
    }
    .completion-subtitle {
      font-size: 16px;
      color: #666;
      margin-bottom: 32px;
    }
    .result-summary {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 32px;
      margin-bottom: 24px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }
    .user-welcome {
      font-size: 20px;
      font-weight: 600;
      color: #333;
      margin-bottom: 24px;
    }
    .personality-type {
      font-size: 24px;
      font-weight: 700;
      color: #a3e4d7;
      margin-bottom: 16px;
    }
    .type-description {
      font-size: 16px;
      color: #555;
      line-height: 1.6;
      margin-bottom: 24px;
    }
    .traits-grid,
    .analysis-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    .trait-card,
    .analysis-card {
      background: linear-gradient(135deg, #f0f8ff, #fdf8f4);
      padding: 16px;
      border-radius: 12px;
      text-align: left;
    }
    .trait-label,
    .analysis-label {
      font-size: 14px;
      font-weight: 600;
      color: #666;
      margin-bottom: 4px;
    }
    .trait-value,
    .analysis-value {
      font-size: 16px;
      font-weight: 500;
      color: #333;
    }
    .result-keywords {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-bottom: 32px;
    }
    .keyword-tag {
      background: linear-gradient(135deg, #e8e2f7, #d0f0e9);
      color: #555;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 500;
    }
    .analysis-title {
      font-size: 20px;
      font-weight: 600;
      color: #333;
      margin: 16px 0 8px;
      text-align: left;
    }
    .log-button {
      width: 100%;
      height: 56px;
      background: linear-gradient(135deg, #e8e2f7, #a3e4d7);
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 700;
      color: #333;
      cursor: pointer;
      margin-bottom: 16px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(163, 228, 215, 0.3);
    }
    .log-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(163, 228, 215, 0.4);
    }
    .action-buttons {
      display: flex;
      gap: 16px;
      justify-content: center;
    }
    .action-button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .action-button.home {
      background: linear-gradient(135deg, #d8efd6, #a3e4d7);
      color: #333;
    }
    .action-button.stats {
      background: linear-gradient(135deg, #fff9c4, #f0e68c);
      color: #333;
    }
    .action-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      z-index: 1000;
      backdrop-filter: blur(5px);
    }
    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 32px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }
    .modal-header {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: #333;
    }
    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
    }
    /* Toast */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #4caf50, #45a049);
      color: white;
      padding: 16px 24px;
      border-radius: 8px;
      display: none;
      z-index: 1001;
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
    }
    /* Responsive */
    @media (max-width: 768px) {
      .main-container {
        padding: 16px;
      }
      .question-card,
      .user-info-card {
        padding: 24px;
      }
      .form-row {
        flex-direction: column;
        gap: 0;
      }
      .traits-grid,
      .analysis-grid {
        grid-template-columns: 1fr;
      }
      .action-buttons {
        flex-direction: column;
      }
    }
    @media (max-width: 480px) {
      .completion-message {
        font-size: 24px;
      }
      .personality-type {
        font-size: 20px;
      }
      .navigation {
        flex-direction: column;
      }
      .nav-button {
        width: 100%;
      }
    }
    .job-block {
      padding: 10px 18px;
      border-radius: 8px;
      background: #f5f5f5;
      cursor: pointer;
      font-size: 15px;
      border: 2px solid transparent;
      transition: all 0.2s;
      margin-bottom: 4px;
      user-select: none;
    }
    .job-block.selected {
      background: linear-gradient(135deg, #a3e4d7, #c0b3ea);
      color: #333;
      border-color: #a3e4d7;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="step-indicator" id="stepIndicator">íšŒì›ê°€ì… 1/22</div>
    <div class="header-title">íšŒì›ê°€ì… 2ë‹¨ê³„ &amp; ì„±í–¥ ë¶„ì„ 20ë‹¨ê³„</div>
  </div>

  <div class="main-container">
    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>

    <!-- 1ë‹¨ê³„: ê¸°ë³¸ ì •ë³´ ì…ë ¥ -->
    <div class="user-info-card" id="userInfoCard">
      <div class="form-title">ê¸°ë³¸ ì •ë³´ ì…ë ¥</div>
      <div class="form-subtitle">íšŒì›ê°€ì… í›„ ì„±í–¥ ë¶„ì„ì„ ì§„í–‰í•©ë‹ˆë‹¤.</div>
      <div class="form-group">
        <label class="form-label" for="nameInput">ë‹‰ë„¤ì„(ë³„ëª…)</label>
        <input
          type="text"
          id="nameInput"
          class="form-input"
          placeholder="ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©í•  ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”"
        />
      </div>
      <div class="form-group">
        <label class="form-label" for="ageInput">ë‚˜ì´</label>
        <input
          type="number"
          id="ageInput"
          class="form-input"
          placeholder="ë‚˜ì´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
        />
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label" for="genderSelect">ì„±ë³„</label>
          <select id="genderSelect" class="form-input">
            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
            <option value="male">ë‚¨ì„±</option>
            <option value="female">ì—¬ì„±</option>
          </select>
        </div>
      </div>
      <!-- í˜„ì¬ ì§ì—… ë° ì£¼ëœ í™œë™ ì¶”ê°€ -->
      <div class="form-group">
        <label class="form-label">í˜„ì¬ ì§ì—… ë° ì£¼ëœ í™œë™ (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</label>
        <div id="jobCategories" style="display:flex; flex-wrap:wrap; gap:10px; margin-bottom:8px;">
          <label><input type="checkbox" value="í•™ìƒ"> í•™ìƒ</label>
          <label><input type="checkbox" value="ì§ì¥ì¸"> ì§ì¥ì¸</label>
          <label><input type="checkbox" value="í”„ë¦¬ëœì„œ"> í”„ë¦¬ëœì„œ</label>
          <label><input type="checkbox" value="ì°½ì‘ì"> ì°½ì‘ì</label>
          <label><input type="checkbox" value="êµ¬ì§ì¤‘"> êµ¬ì§ì¤‘</label>
          <label><input type="checkbox" value="ì£¼ë¶€"> ì£¼ë¶€</label>
          <label><input type="checkbox" value="ê¸°íƒ€"> ê¸°íƒ€</label>
        </div>
        <input type="text" id="jobDetailInput" class="form-input" placeholder="ì§ì ‘ ì…ë ¥ (ì„ íƒ)" style="display:none;">
      </div>
      <!-- ì¼ì£¼ì¼ ì¤‘ì— ììœ ë¡œìš´ ì‹œê°„ê°„ -->
      <div class="form-group">
        <label class="form-label" for="freeTimeRange" , style = 'font-size: 17px; font-weight: 1000;'>
          ì¼ì£¼ì¼ ê¸°ì¤€ ììœ ë¡œìš´ ì‹œê°„ (0~50ì‹œê°„): 
          <span id="freeTimeValue" style="font-weight:700; font-size:large; color:#e42f2f;">25</span>ì‹œê°„
        </label>
        <input type="range" id="freeTimeRange" min="0" max="50" value="25" step="1" style="width:100%;">
      </div>
      <div class="navigation">
        <button class="nav-button" id="userInfoNext" style="margin-left:auto;">ë‹¤ìŒ</button>
      </div>
    </div>

    <!-- 2ë‹¨ê³„: ì·¨ë¯¸ ë° ì½˜í…ì¸  ê¸°ë°˜ ì´ˆê¸° ì„ í˜¸ (ì„¸ì…˜ ë¶„ë¦¬, ì„ íƒì‚¬í•­) -->
    <div class="user-info-card" id="hobbyInfoCard" style="display:none;">
      <div class="form-title">ì·¨ë¯¸ ë° ì½˜í…ì¸  ê¸°ë°˜ ì´ˆê¸° ì„ í˜¸</div>
      <div class="form-subtitle" style="color:#888; font-size:13px;">
        * ì´ ë‹¨ê³„ëŠ” <b>ì„ íƒì‚¬í•­</b>ì…ë‹ˆë‹¤. ì…ë ¥í•˜ì§€ ì•Šì•„ë„ 'ë‹¤ìŒ'ì„ ëˆŒëŸ¬ ë„˜ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </div>
      <div class="form-group">
        <label class="form-label">ìµœê·¼ì— ì¦ê²¨ ë³¸ ì»¨í…ì¸  ìœ í˜• (ë³µìˆ˜ ì„ íƒ)</label>
        <div id="contentTypes" style="display:flex; flex-wrap:wrap; gap:10px;">
          <label><input type="checkbox" value="ê²Œì„"> ê²Œì„</label>
          <label><input type="checkbox" value="ì˜í™”"> ì˜í™”</label>
          <label><input type="checkbox" value="ìŒì•…"> ìŒì•…</label>
          <label><input type="checkbox" value="ì±…"> ì±…</label>
          <label><input type="checkbox" value="ë§›ì§‘"> ë§›ì§‘</label>
          <label><input type="checkbox" value="ìš´ë™"> ìš´ë™</label>
          <label><input type="checkbox" value="ì°½ì‘í™œë™"> ì°½ì‘í™œë™</label>
          <label><input type="checkbox" value="ë‹¨ì²´ ìŠ¤í¬ì¸ "> ë‹¨ì²´ ìŠ¤í¬ì¸ </label>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ì»¨í…ì¸ ë‚˜ í™œë™ (ë³µìˆ˜ ì…ë ¥ ê°€ëŠ¥)</label>
        <div style="margin-bottom:8px;">
          <strong>ìœ íŠœë¸Œ</strong> <input type="text" id="favYoutube" class="form-input" placeholder="ìœ íŠœë¸Œ ë§í¬ (ì—¬ëŸ¬ ê°œëŠ” ,ë¡œ êµ¬ë¶„)">
        </div>
        <div style="margin-bottom:8px;">
          <strong>ì˜í™”</strong> <input type="text" id="favMovie" class="form-input" placeholder="ì˜í™” ì œëª©/ì¥ë¥´ (ì—¬ëŸ¬ ê°œëŠ” ,ë¡œ êµ¬ë¶„)">
        </div>
        <div style="margin-bottom:8px;">
          <strong>ë„ì„œ</strong> <input type="text" id="favBook" class="form-input" placeholder="ì±… ì´ë¦„/ì¥ë¥´ (ì—¬ëŸ¬ ê°œëŠ” ,ë¡œ êµ¬ë¶„)">
        </div>
        <div>
          <strong>ë…¸ë˜</strong> <input type="text" id="favMusic" class="form-input" placeholder="ë…¸ë˜ ì œëª©/ì¥ë¥´ (ì—¬ëŸ¬ ê°œëŠ” ,ë¡œ êµ¬ë¶„)">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">ì§€ê¸ˆ ì¦ê²¨í•˜ê³  ìˆëŠ” ì·¨ë¯¸ (ë³µìˆ˜ ì…ë ¥, ê¸°íƒ€ ê°€ëŠ¥)</label>
        <input type="text" id="currentHobbies" class="form-input" placeholder="ì˜ˆ: ê¸€ì“°ê¸°, ë“œë¡œì‰, ë‹¬ë¦¬ê¸°, ASMR, ìš”ë¦¬ ë“±">
      </div>
      <div class="navigation" style="justify-content: flex-end; gap: 16px;">
        <button class="nav-button" id="hobbyInfoPrev" style="margin-right:auto;">ì´ì „</button>
        <button class="nav-button" id="hobbyInfoNext">ë‹¤ìŒ</button>
      </div>
    </div>

    <!-- Questions -->
    <div id="questionsContainer"></div>

    <!-- Results Screen -->
    <div class="results-container" id="resultsContainer">
      <div class="completion-message">ê²€ì‚¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div>
      <div class="completion-subtitle">ë‚˜ì˜ ì„±í–¥ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</div>
      <div class="result-summary">
        <div class="user-welcome" id="resultWelcome">
          í™˜ì˜í•©ë‹ˆë‹¤, <span id="userName"></span>ë‹˜!
        </div>
        <!-- â€œí•µì‹¬ ì„±í–¥â€ ì¶œë ¥ ì˜ì—­ -->
        <div class="personality-type" id="resultType">
          ì„±í–¥: <strong>ì˜ˆì‹œí˜• + ëª°ì…í˜•</strong>
        </div>
        <div class="type-description" id="typeDescription">
          ì—¬ê¸°ì— ì‚¬ìš©ìì˜ ì„±í–¥ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì´ í‘œì‹œë©ë‹ˆë‹¤.
        </div>

        <!-- ì„¸ë¶€íƒ€ì… í™•ì¸ ë²„íŠ¼ -->
        <button class="log-button" id="showAnalysisBtn" style="margin-bottom:16px;">
          ì„¸ë¶€ìœ í˜• í™•ì¸í•˜ê¸°
        </button>

        <!-- ë¶„ì„ ì˜ì—­: ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ -->
        <div id="analysisSection" style="display:none;">
          <!-- ì„œë¸Œíƒ€ì…ë³„ ì§‘ê³„ ì¶œë ¥ ì˜ì—­ -->
          <div class="analysis-title">ğŸ”– ì„œë¸Œíƒ€ì…ë³„ ì‘ë‹µ ë¶„í¬</div>
          <div class="analysis-grid" id="subtypeAnalysisGrid"></div>

          <!-- SDT 3ëŒ€ ìš•êµ¬ë³„ ì§‘ê³„ ì¶œë ¥ ì˜ì—­ -->
          <div class="analysis-title">ğŸŒ± SDT 3ëŒ€ ìš•êµ¬ë³„ ë¶„í¬</div>
          <div class="analysis-grid" id="sdtAnalysisGrid"></div>
        </div>

        <!-- ì˜ˆì‹œ íŠ¸ë ˆì‡(íƒ¤ëŸ°íŠ¸)ì´ë‚˜ í‚¤ì›Œë“œ íƒœê·¸ ì¶œë ¥ ì˜ì—­(ì„ íƒ) -->
        <div class="result-keywords" id="keywordsContainer"></div>

        <button class="log-button" id="downloadLog">
          ê²°ê³¼ ë¡œê·¸ ë‹¤ìš´ë¡œë“œ
        </button>
        <div class="action-buttons">
          <button class="action-button home" id="goHome">í™ˆìœ¼ë¡œ</button>
          <button class="action-button stats" id="viewStats">
            ë‚˜ ìì„¸íˆ ì•Œì•„ë³´ê¸°
          </button>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toastMessage">ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
  </div>

  <script>
    //
    // ===============================
    // 1) QUESTIONS DATA
    // ===============================
    //
    const questions = [
      {
        number: 1,
        text: "ì–´ë–¤ ìƒí™©ì—ì„œ ë” ë¿Œë“¯í•¨ì„ ëŠë¼ë‚˜ìš”?",
        category: "ë„ì „í˜• vs ëŒë´„í˜•",
        options: [
          "ë³µì¡í•œ ë¬¸ì œë¥¼ ëê¹Œì§€ í•´ê²°í–ˆì„ ë•Œ",
          "ì¹œêµ¬ì—ê²Œ ê³ ë¯¼ì„ ì˜ ë“¤ì–´ì¤¬ì„ ë•Œ"
        ],
        emojis: ["ğŸ§©", "ğŸ¤—"]
      },
      {
        number: 2,
        text: "ë” ì„¤ë ˆëŠ” ìˆœê°„ì€?",
        category: "íƒí—˜í˜• vs ì—°ê²°í˜•",
        options: [
          "ìƒˆë¡œìš´ ë„ì‹œë¥¼ ììœ ë¡­ê²Œ íƒí—˜í•  ë•Œ",
          "ì¢‹ì•„í•˜ëŠ” ì¹œêµ¬ë“¤ê³¼ ë§Œë‚¨ì„ ê³„íší•  ë•Œ"
        ],
        emojis: ["ğŸŒ", "ğŸ‘«"]
      },
      {
        number: 3,
        text: "ì°½ì‘ í™œë™ì—ì„œ ì–´ë–¤ ì ì´ ë” ë§¤ë ¥ì ì´ì„¸ìš”?",
        category: "ì°½ì¡°í˜• vs ê³µìœ í˜•",
        options: [
          "ë‚˜ë§Œì˜ ìƒìƒë ¥ì„ ë°œíœ˜í•˜ëŠ” ê²ƒ",
          "í”¼ë“œë°±ì„ ë°›ê³  ì„œë¡œ ë°œì „í•˜ëŠ” ê²ƒ"
        ],
        emojis: ["ğŸ¨", "ğŸ”„"]
      },
      {
        number: 4,
        text: "íœ´ì‹ì´ í•„ìš”í•  ë•Œ ì–´ë–¤ í™œë™ì„ í•˜ë‚˜ìš”?",
        category: "ê°ê°í˜• vs ê³µê°í˜•",
        options: [
          "ì¢‹ì€ ì†Œë¦¬ì™€ í–¥ì„ ëŠë¼ë©° í˜¼ì ì‰¼",
          "ê°ì„±ì ì¸ ì˜í™”ë‚˜ ê¸€ë¡œ ê°ì •ì— ì –ê¸°"
        ],
        emojis: ["ğŸ•¯ï¸", "ğŸ¬"]
      },
      {
        number: 5,
        text: "ëª°ì…ì˜ ì¦ê±°ì›€ì„ ëŠë¼ëŠ” ìˆœê°„ì€?",
        category: "ëª°ì…í˜• vs ë¦¬ë“¬í˜•",
        options: [
          "ëŸ¬ë‹/ì½”ë”©/ë…ì„œì— ì§‘ì¤‘í•  ë•Œ",
          "ìŒì•…ì— ëª¸ì„ ë§¡ê²¨ ë¦¬ë“¬ì„ ëŠë‚„ ë•Œ"
        ],
        emojis: ["ğŸ“š", "ğŸµ"]
      },
      {
        number: 6,
        text: "ì—¬ê°€ë¥¼ ë³´ë‚´ëŠ” ì´ìƒì ì¸ ë°©ì‹ì€?",
        category: "ì¦‰í¥í˜• vs ì—°ê²°í˜•",
        options: [
          "ì¦‰í¥ì ìœ¼ë¡œ ë‚˜ì„œëŠ” í˜¼ìë§Œì˜ ì—¬í–‰",
          "ì¹œêµ¬ë“¤ê³¼ ë¯¸ë¦¬ ê³„íší•œ ëª¨ì„ ì°¸ì—¬"
        ],
        emojis: ["ğŸ§³", "ğŸ“…"]
      },
      {
        number: 7,
        text: "ì‚¬ëŒë“¤ê³¼ ìˆì„ ë•Œ ì–´ë–¤ ëŠë‚Œì´ ë“œë‚˜ìš”?",
        category: "ê°œì¸í˜• vs ì‚¬íšŒí˜•",
        options: [
          "ë¹¨ë¦¬ ì§‘ì— ê°€ê³  ì‹¶ë‹¤",
          "í•¨ê»˜ ìˆì„ìˆ˜ë¡ ë” í™œë ¥ì´ ìƒê¸´ë‹¤"
        ],
        emojis: ["ğŸ ", "ğŸ‰"]
      },
      {
        number: 8,
        text: "ì„±ê³µì˜ ìˆœê°„, ë¬´ì—‡ì´ ë– ì˜¤ë¥´ë‚˜ìš”?",
        category: "ìœ ëŠ¥ì„± vs ê´€ê³„ì„±",
        options: [
          "ìŠ¤ìŠ¤ë¡œ í„°ë“í•´ ë‚¸ ì„±ì·¨ê°",
          "í•¨ê»˜ ì´ë¤„ë‚¸ ì„±ê³¼ì˜ ê¸°ì¨"
        ],
        emojis: ["ğŸ†", "ğŸ¤"]
      },
      {
        number: 9,
        text: "ì–´ë–¤ ê°ì •ì´ ë” ê°•í•˜ê²Œ ë‚¨ë‚˜ìš”?",
        category: "íƒí—˜í˜• vs ê³µê°í˜•",
        options: [
          "ìƒˆë¡­ê³  ë‚¯ì„  ê±¸ ì ‘í–ˆì„ ë•Œì˜ ê²½ì´ë¡œì›€",
          "ëˆ„êµ°ê°€ì™€ êµê°í–ˆì„ ë•Œì˜ ë”°ëœ»í•¨"
        ],
        emojis: ["âœ¨", "ğŸ’"]
      },
      {
        number: 10,
        text: "ì‹œê°„ ê°€ëŠ” ì¤„ ëª¨ë¥´ê²Œ ë¹ ì§€ëŠ” ê±´?",
        category: "ë„ì „í˜• vs ê³µê°í˜•",
        options: [
          "ë¶„ì„, ì¶”ë¦¬, ëª©í‘œ ë‹¬ì„±í˜• ê²Œì„",
          "ì •ì„œì  ìŠ¤í† ë¦¬ê°€ ìˆëŠ” ë‹¤í/ì—ì„¸ì´"
        ],
        emojis: ["ğŸ•µï¸â€â™‚ï¸", "ğŸ“–"]
      },
      {
        number: 11,
        text: "íŒ€ í™œë™ ì¤‘ ë” ëŒë¦¬ëŠ” ì—­í• ì€?",
        category: "ì°½ì¡°í˜• vs ëŒë´„í˜•",
        options: ["ê¸°íšì, ì•„ì´ë””ì–´ ì œì‹œ", "ì¡°ìœ¨ì, ê°ˆë“± ì¤‘ì¬ì"],
        emojis: ["ğŸ’¡", "ğŸ«‚"]
      },
      {
        number: 12,
        text: "í”¼ê³¤í•  ë•Œ ì„ í˜¸í•˜ëŠ” ì½˜í…ì¸ ëŠ”?",
        category: "ê°ê°í˜• vs ê³µìœ í˜•",
        options: [
          "ASMR, ë¨¹ë°©, ê°ê° ìê·¹í˜• ì˜ìƒ",
          "ì‚¬ëŒ ì‚¬ëŠ” ì´ì•¼ê¸°(ë¸Œì´ë¡œê·¸, ì¸í„°ë·° ë“±) ì˜ìƒ"
        ],
        emojis: ["ğŸ§", "ğŸ—£ï¸"]
      },
      {
        number: 13,
        text: "ì£¼ë§ì— ë­˜ í•˜ë©° ì‹œê°„ì„ ë³´ë‚´ê³  ì‹¶ë‚˜ìš”?",
        category: "ì„±ì¥í˜• vs ê³µìœ í˜•",
        options: ["ì½”ë”©, ê¸€ì“°ê¸°, ìê°€í•™ìŠµ", "ì¹œêµ¬ì™€ ì „ì‹œíšŒ/ë¶í† í¬ ê°€ê¸°"],
        emojis: ["ğŸ’»", "ğŸ“š"]
      },
      {
        number: 14,
        text: "ê¸°ë¶„ì´ ê°€ì¥ ì¢‹ì•„ì§ˆ ë•ŒëŠ”?",
        category: "ìœ ëŠ¥ì„± vs ê´€ê³„ì„±",
        options: ["ë‚˜ë§Œì˜ ì„±ì·¨ë¥¼ ì™„ì„±í–ˆì„ ë•Œ", "ê°ì •ì„ íƒ€ì¸ê³¼ ë‚˜ëˆ´ì„ ë•Œ"],
        emojis: ["ğŸ¥‡", "ğŸ’¬"]
      },
      {
        number: 15,
        text: "í™œë™ì—ì„œ ë¬´ì—‡ì„ ë” ì¤‘ì‹œí•˜ë‚˜ìš”?",
        category: "ì°½ì¡°í˜• vs ì¦‰í¥í˜•",
        options: ["ë‚´ê°€ ì£¼ë„í•˜ê³  í†µì œí•  ìˆ˜ ìˆëŠ” ê²ƒ", "ì¦‰ì„ì—ì„œ ë³€í™”ë¥¼ ìˆ˜ìš©í•˜ëŠ” ê²ƒ"],
        emojis: ["ğŸ“", "ğŸ²"]
      },
      {
        number: 16,
        text: "ë” ëŒë¦¬ëŠ” ì½˜í…ì¸ ëŠ”?",
        category: "ë„ì „í˜• vs ê³µê°í˜•",
        options: ["ë…¼ë¦¬ì ì¸ ë¯¸ìŠ¤í„°ë¦¬ë‚˜ ì¶”ë¦¬ë¬¼", "ê°ì •ì„ ìš¸ë¦¬ëŠ” íœ´ë¨¼ ìŠ¤í† ë¦¬"],
        emojis: ["ğŸ§ ", "ğŸ˜­"]
      },
      {
        number: 17,
        text: "ì˜ë¯¸ ìˆëŠ” ì—¬ê°€ëŠ”?",
        category: "ê°ê°í˜• vs ì—°ê²°í˜•",
        options: ["ì™¸ë¶€ ìê·¹ ì—†ì´ ê°ê°ì— ì§‘ì¤‘í•˜ê¸°", "ê°ì •ì´ì… ê°€ëŠ¥í•œ ì´ì•¼ê¸°ì™€ ì‚¬ëŒë“¤"],
        emojis: ["ğŸ›€", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"]
      },
      {
        number: 18,
        text: "ìš´ë™ì„ í•  ë•Œ ë¬´ì—‡ì´ ë” ì¤‘ìš”í•˜ë‚˜ìš”?",
        category: "ëª°ì…í˜• vs ë¦¬ë“¬/ì—°ê²°í˜•",
        options: ["ë‚´ ê¸°ë¡ê³¼ì˜ ì‹¸ì›€", "ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ì‘ì›ê³¼ ë„ì „"],
        emojis: ["â±ï¸", "ğŸƒâ€â™‚ï¸"]
      },
      {
        number: 19,
        text: "í˜ë“  í•˜ë£¨ ëì— ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ íë§í•˜ë‚˜ìš”?",
        category: "ê°œì¸í˜• vs ê´€ê³„í˜•",
        options: ["ë‚˜ë§Œì˜ ì·¨ë¯¸ë‚˜ ê°œì¸ ì‹œê°„", "ì¹œêµ¬ì™€ ê°ì •ì„ ë‚˜ëˆ„ëŠ” ìˆ˜ë‹¤"],
        emojis: ["ğŸ£", "â˜•"]
      },
      {
        number: 20,
        text: "ê²°ê³¼ê°€ ì˜¤ë˜ ê±¸ë ¤ë„ ëª°ì… ê°€ëŠ¥í•œ ê±´?",
        category: "ì„±ì¥í˜• vs ì—°ê²°í˜•",
        options: ["ë°°ì›Œê°€ëŠ” ê³¼ì • ìì²´ê°€ í¥ë¯¸ë¡œìš´ ê²ƒ", "ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ê°ˆ ìˆ˜ ìˆë‹¤ë©´"],
        emojis: ["ğŸ“ˆ", "ğŸš¶â€â™‚ï¸"]
      }
    ];

    //
    // ===============================
    // 2) SDT MAPPING TABLE
    // ===============================
    //
    // ê° ì„œë¸Œíƒ€ì…(ì˜ˆ: â€œë„ì „í˜•â€, â€œëŒë´„í˜•â€ ë“±)ì„ SDT ì¹´í…Œê³ ë¦¬ë¡œ ë§¤í•‘
    //
    const sdtMapping = {
      // Autonomy ê³„ì—´ (ììœ¨ì„±)
      "íƒí—˜í˜•": "Autonomy",
      "ì°½ì¡°í˜•": "Autonomy",
      "ì¦‰í¥í˜•": "Autonomy",
      "ê°ê°í˜•": "Autonomy",
      "ë¦¬ë“¬í˜•": "Autonomy",

      // Competence ê³„ì—´ (ì—­ëŸ‰)
      "ë„ì „í˜•": "Competence",
      "ëª°ì…í˜•": "Competence",
      "ìœ ëŠ¥ì„±": "Competence",
      "ì„±ì¥í˜•": "Competence",

      // Relatedness ê³„ì—´ (ê´€ê³„ì„±)
      "ëŒë´„í˜•": "Relatedness",
      "ê³µìœ í˜•": "Relatedness",
      "ê³µê°í˜•": "Relatedness",
      "ê´€ê³„ì„±": "Relatedness",
      "ì—°ê²°í˜•": "Relatedness",
      "ì‚¬íšŒí˜•": "Relatedness"
    };

    //
    // ===============================
    // 3) STATE VARIABLES
    // ===============================
    //
    let currentStep = 0;
    const totalSteps = questions.length + 2; // íšŒì›ì •ë³´ + ì·¨ë¯¸/ì½˜í…ì¸  + ì§ˆë¬¸ 20 = 22ë‹¨ê³„
    const responses = { userInfo: {}, answers: [] };

    // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    const userInfoCard = document.getElementById("userInfoCard");
    const userInfoNext = document.getElementById("userInfoNext");
    const questionsContainer = document.getElementById("questionsContainer");
    const progressFill = document.getElementById("progressFill");
    const stepIndicator = document.getElementById("stepIndicator");
    const resultsContainer = document.getElementById("resultsContainer");
    const userNameSpan = document.getElementById("userName");
    const resultTypeEl = document.getElementById("resultType");
    const typeDescriptionEl = document.getElementById("typeDescription");
    const subtypeAnalysisGrid = document.getElementById("subtypeAnalysisGrid");
    const sdtAnalysisGrid = document.getElementById("sdtAnalysisGrid");
    const downloadLogBtn = document.getElementById("downloadLog");
    const goHomeBtn = document.getElementById("goHome");
    const viewStatsBtn = document.getElementById("viewStats");
    const toastMessage = document.getElementById("toastMessage");
    const keywordsContainer = document.getElementById("keywordsContainer");
    const showAnalysisBtn = document.getElementById("showAnalysisBtn");
    const analysisSection = document.getElementById("analysisSection");
    const freeTimeRange = document.getElementById("freeTimeRange");
    const freeTimeValue = document.getElementById("freeTimeValue");

    //
    // ===============================
    // 4) PROGRESS BAR ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    // ===============================
    //
    function updateProgress() {
      const percent = (currentStep / totalSteps) * 100;
      progressFill.style.width = `${percent}%`;
      // ë‹¨ê³„ë³„ ì•ˆë‚´
      if (currentStep === 0) {
        stepIndicator.innerText = `íšŒì›ê°€ì… 1/${totalSteps}`;
      } else if (currentStep === 1) {
        stepIndicator.innerText = `íšŒì›ê°€ì… 2/${totalSteps}`;
      } else if (currentStep <= 1 + questions.length) {
        stepIndicator.innerText = `ì„±í–¥ ë¬¸ë‹µ ${currentStep - 1}/${questions.length}`;
      } else {
        stepIndicator.innerText = `ê²°ê³¼`;
      }
    }

    //
    // ===============================
    // 5) ì²« í™”ë©´: íšŒì›ê°€ì… í™”ë©´ í‘œì‹œ
    // ===============================
    //
    function showUserInfo() {
      userInfoCard.style.display = "block";
      hobbyInfoCard.style.display = "none";
      questionsContainer.style.display = "none";
      resultsContainer.classList.remove("active");
    }

    //
    // ===============================
    // 6) ì§ˆë¬¸ ì¹´ë“œ í‘œì‹œ í•¨ìˆ˜
    // ===============================
    //
    function showQuestion(index) {
      userInfoCard.style.display = "none";
      hobbyInfoCard.style.display = "none";
      resultsContainer.classList.remove("active");
      questionsContainer.style.display = "block";
      questionsContainer.innerHTML = ""; // ê¸°ì¡´ ì§ˆë¬¸ ì´ˆê¸°í™”

      const q = questions[index];
      const card = document.createElement("div");
      card.className = "question-card active";

      // ì§ˆë¬¸ ë²ˆí˜¸
      const numberEl = document.createElement("div");
      numberEl.className = "question-number";
      numberEl.innerText = `Q${q.number}`;
      // ì§ˆë¬¸ í…ìŠ¤íŠ¸
      const textEl = document.createElement("div");
      textEl.className = "question-text";
      textEl.innerText = q.text;

      // ì˜µì…˜ ì»¨í…Œì´ë„ˆ
      const optionsEl = document.createElement("div");
      optionsEl.className = "options-container";

      // A/B ì˜µì…˜ ìƒì„±
      q.options.forEach((opt, i) => {
        const item = document.createElement("div");
        item.className = "option-item";
        item.addEventListener("click", () => selectOption(item, i));

        const radio = document.createElement("div");
        radio.className = "option-radio";
        const text = document.createElement("div");
        text.className = "option-text";
        text.innerText = opt;
        const emoji = document.createElement("div");
        emoji.className = "option-emoji";
        emoji.innerText = q.emojis[i];

        item.appendChild(radio);
        item.appendChild(text);
        item.appendChild(emoji);
        optionsEl.appendChild(item);
      });

      // ì´ì „/ë‹¤ìŒ ë²„íŠ¼
      const nav = document.createElement("div");
      nav.className = "navigation";
      const prevBtn = document.createElement("button");
      prevBtn.className = "nav-button";
      prevBtn.innerText = "ì´ì „";
      prevBtn.disabled = false; // í•­ìƒ í™œì„±í™”

      prevBtn.addEventListener("click", () => {
        if (index === 0) {
          // ì²« ë¬¸í•­ì—ì„œ ì´ì „ ì‹œ ì·¨ë¯¸/ì½˜í…ì¸  ì¹´ë“œë¡œ ì´ë™
          questionsContainer.style.display = "none";
          hobbyInfoCard.style.display = "block";
          currentStep = 1;
          updateProgress();
        } else {
          navigateQuestion(index - 1);
        }
      });

      const nextBtn = document.createElement("button");
      nextBtn.className = "nav-button next";
      nextBtn.innerText = index === questions.length - 1 ? "ì™„ë£Œ" : "ë‹¤ìŒ";
      nextBtn.disabled = !responses.answers[index]; // ì´ë¯¸ ì‘ë‹µì´ ìˆìœ¼ë©´ í™œì„±í™”

      nextBtn.addEventListener("click", () => navigateQuestion(index + 1));

      nav.appendChild(prevBtn);
      nav.appendChild(nextBtn);

      // ì¹´ë“œì— ë¶™ì´ê¸°
      card.appendChild(numberEl);
      card.appendChild(textEl);
      card.appendChild(optionsEl);
      card.appendChild(nav);

      questionsContainer.appendChild(card);

      // ì˜µì…˜ì„ ì„ íƒí–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
      function selectOption(itemEl, optionIndex) {
        // ë‹¤ë¥¸ ì˜µì…˜ë“¤ ì´ˆê¸°í™”
        const siblings = itemEl.parentElement.querySelectorAll(".option-item");
        siblings.forEach((sib) => sib.classList.remove("selected"));
        // í˜„ì¬ ì˜µì…˜ì— selected í´ë˜ìŠ¤ ì¶”ê°€
        itemEl.classList.add("selected");
        // ì‘ë‹µ ë°ì´í„° ì €ì¥
        responses.answers[index] = {
          question: q.text,
          answer: q.options[optionIndex]
        };
        // "ë‹¤ìŒ" ë²„íŠ¼ í™œì„±í™” (ê¸°ì¡´)
        nextBtn.disabled = false;

        // === ì˜µì…˜ ì„ íƒ ì¦‰ì‹œ ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ ì´ë™ ===
        setTimeout(() => {
          if (index < questions.length - 1) {
            navigateQuestion(index + 1);
          } else {
            showResults();
          }
        }, 200); // 0.2ì´ˆ í›„ ì´ë™ (ì„ íƒ íš¨ê³¼ ë³´ì´ê²Œ)
      }

      // ì´ë¯¸ ì‘ë‹µì´ ìˆìœ¼ë©´ í•´ë‹¹ ì˜µì…˜ì„ ë¯¸ë¦¬ ì„ íƒ í‘œì‹œ
      if (responses.answers[index]) {
        const prevAnswer = responses.answers[index].answer;
        q.options.forEach((opt, i) => {
          if (opt === prevAnswer) {
            const optionItems = optionsEl.querySelectorAll(".option-item");
            optionItems[i].classList.add("selected");
            nextBtn.disabled = false;
          }
        });
      }
    }

    //
    // ===============================
    // 7) ì§ˆë¬¸ ìˆœì„œ ì´ë™ í•¨ìˆ˜
    // ===============================
    //
    function navigateQuestion(newIndex) {
      // ë§Œì•½ í˜„ì¬ ì¸ë±ìŠ¤ì—ì„œ ë‹µë³€ì„ ì„ íƒí•˜ì§€ ì•Šì•˜ë‹¤ë©´ ë” ì´ë™í•˜ì§€ ì•ŠìŒ
      if (
        newIndex > currentStep - 1 &&
        !responses.answers[currentStep - 1]
      )
        return;

      currentStep = newIndex + 1;
      updateProgress();

      if (newIndex < questions.length) {
        showQuestion(newIndex);
      } else {
        // ëª¨ë“  ì§ˆë¬¸ì´ ëë‚˜ë©´ ê²°ê³¼ í™”ë©´ í‘œì‹œ
        showResults();
      }
    }

    //
    // ===============================
    // 8) ê²°ê³¼ í™”ë©´ í‘œì‹œ í•¨ìˆ˜
    //   - ì—¬ê¸°ì„œ â€œSDTâ€, â€œì„œë¸Œíƒ€ì…ë³„ ì¹´ìš´íŠ¸â€ ë“±ì„ ê³„ì‚°
    // ===============================
    //
    function showResults() {
      analysisSection.style.display = "none";
      showAnalysisBtn.style.display = "block";
      questionsContainer.style.display = "none";
      resultsContainer.classList.add("active");

      // ê²€ì‚¬ ì™„ë£Œ ì‹œ ìƒë‹¨ ë‹¨ê³„ í‘œì‹œë¥¼ "ê²€ì‚¬ ê²°ê³¼"ë¡œ ë³€ê²½
      stepIndicator.innerText = "ê²€ì‚¬ ê²°ê³¼";

      // 1) ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ
      userNameSpan.innerText = responses.userInfo.name || "";

      // 2) â€œí•µì‹¬ ì„±í–¥â€ì„ ì‹¤ì œ í†µê³„ ê¸°ë°˜ìœ¼ë¡œ í‘œì‹œ
      const subtypeCounts = {};
      const sdtCounts = {
        Autonomy: 0,
        Competence: 0,
        Relatedness: 0
      };

      responses.answers.forEach((ansObj, idx) => {
        const { question, answer } = ansObj;
        const matchedItem = questions.find((item) => item.text === question);
        if (!matchedItem) return;
        const [stypeA, stypeB] = matchedItem.category.split(" vs ").map((s) => s.trim());
        let chosenSubtype = null;
        if (answer === matchedItem.options[0]) {
          chosenSubtype = stypeA;
        } else if (answer === matchedItem.options[1]) {
          chosenSubtype = stypeB;
        } else {
          return;
        }
        subtypeCounts[chosenSubtype] = (subtypeCounts[chosenSubtype] || 0) + 1;
        const mappedSDT = sdtMapping[chosenSubtype];
        if (mappedSDT) sdtCounts[mappedSDT] += 1;
      });

      // ìµœë‹¤ ì„ íƒ ì„œë¸Œíƒ€ì… 2ê°œ ì¶”ì¶œ
      const sortedSubtypes = Object.entries(subtypeCounts)
        .sort((a, b) => b[1] - a[1])
        .map(([subtype]) => subtype);
      let mainType = "ê²°ê³¼ ì—†ìŒ";
      if (sortedSubtypes.length === 1) {
        mainType = sortedSubtypes[0];
      } else if (sortedSubtypes.length >= 2) {
        mainType = `${sortedSubtypes[0]} + ${sortedSubtypes[1]}`;
      }

      resultTypeEl.innerHTML = `ì„±í–¥: <strong>${mainType}</strong>`;

      // === ì—¬ê¸°ì„œ userInfoì— mainType ì €ì¥ ===
      responses.userInfo.mainType = mainType;
      // localStorageì— ì €ì¥ (ì „ì²´ responsesë¥¼)
      localStorage.setItem('selfAwarenessSurvey', JSON.stringify(responses));

      typeDescriptionEl.innerText =
        "ì—¬ê¸°ì— ì‚¬ìš©ìì˜ ì„±í–¥ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì´ í‘œì‹œë©ë‹ˆë‹¤.";

      // 3) â€œì„œë¸Œíƒ€ì…ë³„ ì¹´ìš´íŠ¸â€ì™€ â€œSDTë³„ ì¹´ìš´íŠ¸â€ ê³„ì‚°

      // 3-1) ê° ì„œë¸Œíƒ€ì…(ì˜ˆ: â€œë„ì „í˜•â€, â€œëŒë´„í˜•â€ ë“±)ì˜ ì¹´ìš´íŠ¸ë¥¼ ì €ì¥í•  ê°ì²´
      const subtypeCounts2 = {};
      // 3-2) SDT ì¹´í…Œê³ ë¦¬ë³„ ì¹´ìš´íŠ¸ë¥¼ ì €ì¥í•  ê°ì²´
      const sdtCounts2 = {
        Autonomy: 0,
        Competence: 0,
        Relatedness: 0
      };

      // 3-3) ì‚¬ìš©ìê°€ ì‘ë‹µí•œ answers ë°°ì—´ ìˆœíšŒ
      responses.answers.forEach((ansObj, idx) => {
        const { question, answer } = ansObj;
        // 3-3-1) questions ë°°ì—´ì—ì„œ ë™ì¼í•œ question í…ìŠ¤íŠ¸ë¥¼ ì°¾ìŒ
        const matchedItem = questions.find(
          (item) => item.text === question
        );
        if (!matchedItem) {
          console.warn(
            `ì§ˆë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ: ${question}`
          );
          return;
        }
        // 3-3-2) category ì˜ˆ: "ë„ì „í˜• vs ëŒë´„í˜•" â†’ ["ë„ì „í˜•", "ëŒë´„í˜•"]
        const [stypeA, stypeB] = matchedItem.category
          .split(" vs ")
          .map((s) => s.trim());

        // 3-3-3) ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‹µ(answer)ì´ optionAì¸ì§€ optionBì¸ì§€ íŒë³„
        let chosenSubtype = null;
        if (answer === matchedItem.options[0]) {
          chosenSubtype = stypeA;
        } else if (answer === matchedItem.options[1]) {
          chosenSubtype = stypeB;
        } else {
          console.warn(
            `[ì£¼ì˜] ì‘ë‹µì´ ì˜µì…˜A/Bì™€ ì¼ì¹˜í•˜ì§€ ì•ŠìŒ: ${answer}`
          );
          return;
        }

        // 3-3-4) ì„œë¸Œíƒ€ì… ì¹´ìš´íŠ¸ ì¦ê°€
        if (subtypeCounts2[chosenSubtype]) {
          subtypeCounts2[chosenSubtype] += 1;
        } else {
          subtypeCounts2[chosenSubtype] = 1;
        }

        // 3-3-5) SDT ë§¤í•‘ì„ í†µí•´ í•´ë‹¹ ì„œë¸Œíƒ€ì…ì´ ì–´ëŠ ì¹´í…Œê³ ë¦¬ì¸ì§€ ì°¾ì•„ ì¹´ìš´íŠ¸ ì¦ê°€
        const mappedSDT = sdtMapping[chosenSubtype];
        if (mappedSDT) {
          sdtCounts2[mappedSDT] += 1;
        } else {
          console.warn(
            `[ì£¼ì˜] sdtMappingì— í•´ë‹¹ ì„œë¸Œíƒ€ì… ì—†ìŒ: ${chosenSubtype}`
          );
        }
      });

      // 4) â€œì„œë¸Œíƒ€ì…ë³„ ë¶„ì„ ê²°ê³¼â€ ì˜ì—­ì— ì¹´ë“œë¡œ ë Œë”ë§
      subtypeAnalysisGrid.innerHTML = "";
      Object.entries(subtypeCounts2).forEach(([subtype, count]) => {
        const card = document.createElement("div");
        card.className = "analysis-card";
        const lbl = document.createElement("div");
        lbl.className = "analysis-label";
        lbl.innerText = subtype;
        const val = document.createElement("div");
        val.className = "analysis-value";
        val.innerText = `${count}íšŒ`;
        card.appendChild(lbl);
        card.appendChild(val);
        subtypeAnalysisGrid.appendChild(card);
      });

      // ë§Œì•½ ì„œë¸Œíƒ€ì… ì¹´ìš´íŠ¸ê°€ ë¹„ì–´ ìˆë‹¤ë©´ (ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬) ì•ˆë‚´ ë¬¸êµ¬ ì¶”ê°€
      if (Object.keys(subtypeCounts2).length === 0) {
        const emptyMsg = document.createElement("div");
        emptyMsg.innerText = "ì„œë¸Œíƒ€ì… ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤.";
        subtypeAnalysisGrid.appendChild(emptyMsg);
      }

      // 5) â€œSDT 3ëŒ€ ìš•êµ¬ë³„ ë¶„ì„ ê²°ê³¼â€ ì˜ì—­ì— ì¹´ë“œë¡œ ë Œë”ë§
      sdtAnalysisGrid.innerHTML = "";
      Object.entries(sdtCounts2).forEach(([category, count]) => {
        const card = document.createElement("div");
        card.className = "analysis-card";
        const lbl = document.createElement("div");
        lbl.className = "analysis-label";
        lbl.innerText =
          category === "Autonomy"
            ? "ììœ¨ì„±(Autonomy)"
            : category === "Competence"
            ? "ì—­ëŸ‰(Competence)"
            : "ê´€ê³„ì„±(Relatedness)";
        const val = document.createElement("div");
        val.className = "analysis-value";
        val.innerText = `${count}íšŒ`;
        card.appendChild(lbl);
        card.appendChild(val);
        sdtAnalysisGrid.appendChild(card);
      });

      // ë§Œì•½ SDT ì¹´ìš´íŠ¸ê°€ ëª¨ë‘ 0ì´ë¼ë©´ ì•ˆë‚´ ë¬¸êµ¬ ì¶”ê°€
      if (
        sdtCounts2.Autonomy === 0 &&
        sdtCounts2.Competence === 0 &&
        sdtCounts2.Relatedness === 0
      ) {
        const emptyMsg2 = document.createElement("div");
        emptyMsg2.innerText = "SDT ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.";
        sdtAnalysisGrid.appendChild(emptyMsg2);
      }

      // 6) í‚¤ì›Œë“œ íƒœê·¸(ì˜ˆì‹œ)
      keywordsContainer.innerHTML = "";
      // (í•„ìš”í•˜ë‹¤ë©´ ì‹¤ì œ ì•Œê³ ë¦¬ì¦˜ë¡œ íƒœê·¸ë¥¼ ê²°ì •í•˜ë„ë¡ ë³€ê²½í•  ìˆ˜ ìˆìŒ)
      const exampleKeywords = ["#ì˜ˆìˆ ", "#ìê·¹", "#ì§‘ì¤‘"];
      exampleKeywords.forEach((kw) => {
        const tag = document.createElement("div");
        tag.className = "keyword-tag";
        tag.innerText = kw;
        keywordsContainer.appendChild(tag);
      });
    }

    //
    // ===============================
    // 9) ì‚¬ìš©ì ì •ë³´ ì œì¶œ ì²˜ë¦¬
    // ===============================
    //
    userInfoNext.addEventListener("click", () => {
      const nameVal = document.getElementById("nameInput").value.trim();
      const ageVal = document.getElementById("ageInput").value.trim();
      const genderVal = document.getElementById("genderSelect").value;
      const jobCategories = Array.from(document.querySelectorAll('#jobCategories input[type="checkbox"]:checked')).map(cb => cb.value);
      const jobDetail = document.getElementById("jobDetailInput").value.trim();
      const freeTime = document.getElementById("freeTimeRange").value;

      if (!nameVal || !ageVal || !genderVal || !jobCategories.length) {
        alert("ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      // userInfoë§Œ responsesì— ì €ì¥
      responses.userInfo = {
        name: nameVal,
        age: ageVal,
        gender: genderVal,
        jobCategories,
        jobDetail,
        freeTime
      };

      // localStorageì— ì €ì¥ (ì „ì²´ responsesë¥¼)
      localStorage.setItem('selfAwarenessSurvey', JSON.stringify(responses));

      // 1ë‹¨ê³„: ê¸°ë³¸ ì •ë³´ ì…ë ¥ â†’ ë‹¤ìŒ í´ë¦­ ì‹œ
      userInfoCard.style.display = "none";
      hobbyInfoCard.style.display = "block"; // ì·¨ë¯¸/ì½˜í…ì¸  ì¹´ë“œë§Œ ë³´ì´ê²Œ
      questionsContainer.style.display = "none";
      resultsContainer.classList.remove("active");
      currentStep = 1;
      updateProgress();
    });

    // 2ë‹¨ê³„: ì·¨ë¯¸ ë° ì½˜í…ì¸  ì…ë ¥ â†’ ë‹¤ìŒ í´ë¦­ ì‹œ (ì…ë ¥ê°’ ì—†ì–´ë„ í†µê³¼)
    hobbyInfoNext.addEventListener("click", () => {
      // ì…ë ¥ê°’ ì—†ì–´ë„ í†µê³¼ ê°€ëŠ¥ (ì„ íƒì‚¬í•­ì„ì„ ëª…ì‹œ)
      hobbyInfoCard.style.display = "none";
      questionsContainer.style.display = "block"; // ì§ˆë¬¸ ì¹´ë“œë§Œ ë³´ì´ê²Œ
      showQuestion(0);
      resultsContainer.classList.remove("active");
      currentStep = 2;
      updateProgress();
    });

    // ì§ˆë¬¸ ì„¸ì…˜ì—ì„œ ì™„ë£Œ ì‹œ ê²°ê³¼ í™”ë©´ìœ¼ë¡œ ë„˜ì–´ê° (ì´ë¯¸ êµ¬í˜„ë¨)

    // ì²« í™”ë©´: ê¸°ë³¸ ì •ë³´ ì…ë ¥ë§Œ ë³´ì´ê²Œ
    function showUserInfo() {
      userInfoCard.style.display = "block";
      hobbyInfoCard.style.display = "none";
      questionsContainer.style.display = "none";
      resultsContainer.classList.remove("active");
      currentStep = 0;
      updateProgress();
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    showUserInfo();

    // í˜„ì¬ ì§ì—… ë° ì£¼ëœ í™œë™ ì¶”ê°€
    const jobCategories = document.getElementById("jobCategories");
    const otherJobInput = document.getElementById("jobDetailInput");
    const jobBlocks = document.querySelectorAll(".job-block");

    jobBlocks.forEach((block) => {
      block.addEventListener("click", () => {
        block.classList.toggle("selected");
        updateJobCategories();
      });
    });

    function updateJobCategories() {
      const selectedJobs = Array.from(jobBlocks)
        .filter((block) => block.classList.contains("selected"))
        .map((block) => block.innerText.trim());
      jobCategories.value = selectedJobs.join(", ");
    }

    // ì·¨ë¯¸ ë° ì½˜í…ì¸  ê¸°ë°˜ ì´ˆê¸° ì„ í˜¸ ì„¹ì…˜
    const otherHobbyInput = document.getElementById("currentHobbies");
    // ì…ë ¥ë€ ë¹„í™œì„±í™”/ì´ˆê¸°í™” ì½”ë“œ ì œê±° (í•­ìƒ ì…ë ¥ ê°€ëŠ¥)

    // ë‚˜ì´ ì…ë ¥ë€ì—ë§Œ ìˆ«ì ì…ë ¥ ê°€ëŠ¥í•˜ë„ë¡ ì œí•œ
    const ageInput = document.getElementById("ageInput");
    ageInput.addEventListener("keypress", (e) => {
      if (!/[0-9]/.test(e.key)) {
        e.preventDefault();
      }
    });

    // ììœ ë¡œìš´ ì‹œê°„ ìŠ¬ë¼ì´ë” ê°’ í‘œì‹œ
    if (freeTimeRange && freeTimeValue) {
      freeTimeRange.addEventListener("input", () => {
        freeTimeValue.innerText = freeTimeRange.value;
      });
    }

    showAnalysisBtn.addEventListener("click", () => {
      // ì‹¤ì œ ë¶„ì„ ê²°ê³¼ ëŒ€ì‹  ì•ˆë‚´ ë©”ì‹œì§€ë§Œ í‘œì‹œ
      analysisSection.style.display = "none";
      showAnalysisBtn.style.display = "none";

      typeDescriptionEl.innerText =
      `ì„¸ë¶€ ìœ í˜•ì„ ë³´ì—¬ë“œë¦¬ì—” ì§€ê¸ˆ ì •ë³´ê°€ ì‚´ì§ ë¶€ì¡±í•´ìš” ğŸ§\n
ì•„ì§ ê°œë°œ ì¤‘ì¸ ê¸°ëŠ¥ì´ê¸°ë„ í•´ìš”!\n
ì±—ë´‡ê³¼ ì–˜ê¸°í•˜ë©´ì„œ ë‚˜ì— ëŒ€í•œ íŒíŠ¸ë¥¼ ë” ëª¨ì•„ë´ìš” ğŸ’¬ğŸ”`;
  });    


    // "ê¸°íƒ€" ì²´í¬ë°•ìŠ¤ ì²´í¬ ì‹œì—ë§Œ ì§ì ‘ ì…ë ¥ë€ í‘œì‹œ
    const jobEtcCheckbox = document.querySelector('#jobCategories input[value="ê¸°íƒ€"]');
    const jobDetailInput = document.getElementById("jobDetailInput");

    // ì²˜ìŒì—ëŠ” ìˆ¨ê¹€ ì²˜ë¦¬
    jobDetailInput.style.display = "none";

    // ì²´í¬ë°•ìŠ¤ ìƒíƒœ ë³€í™” ê°ì§€
    jobEtcCheckbox.addEventListener("change", function () {
      if (this.checked) {
        jobDetailInput.style.display = "block";
      } else {
        jobDetailInput.style.display = "none";
        jobDetailInput.value = ""; // ì²´í¬ í•´ì œ ì‹œ ì…ë ¥ê°’ë„ ì´ˆê¸°í™”
      }
    });

    // ì·¨ë¯¸ ë° ì½˜í…ì¸  ê¸°ë°˜ ì´ˆê¸° ì„ í˜¸ ì¹´ë“œ ì´ì „ ë²„íŠ¼ ê¸°ëŠ¥ ì¶”ê°€
    const hobbyInfoPrev = document.getElementById("hobbyInfoPrev");
    hobbyInfoPrev.addEventListener("click", () => {
      hobbyInfoCard.style.display = "none";
      userInfoCard.style.display = "block";
      questionsContainer.style.display = "none";
      resultsContainer.classList.remove("active");
      currentStep = 0;
      updateProgress();
    });
    goHomeBtn.addEventListener("click", function () {
  window.location.href = "home_Section.html";
});

viewStatsBtn.addEventListener("click", function () {
  window.location.href = "specify_myself.html";
});

downloadLogBtn.addEventListener("click", function () {
  // ë‹¤ìš´ë¡œë“œí•  ë°ì´í„° êµ¬ì„±
  const logData = {
    userInfo: responses.userInfo,
    answers: responses.answers,
    timestamp: new Date().toISOString()
  };
  const blob = new Blob([JSON.stringify(logData, null, 2)], { type: "application/json" });
  const url = URL.createObjectURL(blob);

  // ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„± ë° í´ë¦­
  const a = document.createElement("a");
  a.href = url;
  a.download = "ì„±í–¥ë¶„ì„_ê²°ê³¼ë¡œê·¸.json";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);

  // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ(ì„ íƒ)
  if (toastMessage) {
    toastMessage.innerText = "ê²°ê³¼ ë¡œê·¸ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!";
    toastMessage.style.display = "block";
    setTimeout(() => {
      toastMessage.style.display = "none";
    }, 2000);
  }
});

document.querySelectorAll('.options-container').forEach(container => {
  container.addEventListener('click', function(e) {
    const option = e.target.closest('.option-item');
    if (!option) return;

    // ì„ íƒ í‘œì‹œ
    container.querySelectorAll('.option-item').forEach(item => item.classList.remove('selected'));
    option.classList.add('selected');

    // ê°’ ì €ì¥ (ì˜ˆì‹œ: data-question-id, data-value ì‚¬ìš©)
    const questionCard = option.closest('.question-card');
    const questionId = questionCard?.dataset.questionId;
    const value = option.dataset.value || option.innerText;
    if (questionId) {
      // responses ê°ì²´ì— ì €ì¥ (responsesê°€ ì „ì—­ì— ìˆë‹¤ê³  ê°€ì •)
      if (!window.responses) window.responses = {};
      window.responses[questionId] = value;
    }

    // ë‹¤ìŒ ì§ˆë¬¸ ì¹´ë“œë¡œ ì´ë™
    if (questionCard) {
      questionCard.classList.remove('active');
      let nextCard = questionCard.nextElementSibling;
      while (nextCard && !nextCard.classList.contains('question-card')) {
        nextCard = nextCard.nextElementSibling;
      }
      if (nextCard && nextCard.classList.contains('question-card')) {
        nextCard.classList.add('active');
        // í•„ìš”ì‹œ progress bar ë“± ì—…ë°ì´íŠ¸
      } else {
        // ë§ˆì§€ë§‰ ì§ˆë¬¸ì´ë©´ ê²°ê³¼ ì²˜ë¦¬
        // showResult() ë“± ê²°ê³¼ í•¨ìˆ˜ í˜¸ì¶œ
        if (typeof showResult === "function") showResult();
      }
    }
  });
});
  </script>
</body>
</html>
